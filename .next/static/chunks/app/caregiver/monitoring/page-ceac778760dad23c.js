(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{4423:function(e,s,t){Promise.resolve().then(t.bind(t,8684))},6463:function(e,s,t){"use strict";var o=t(1169);t.o(o,"usePathname")&&t.d(s,{usePathname:function(){return o.usePathname}}),t.o(o,"useRouter")&&t.d(s,{useRouter:function(){return o.useRouter}})},8684:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i}});var o=t(7437),r=t(8059),a=t.n(r),l=t(2265),n=t(6463);function i(){let e=(0,n.useRouter)(),[s,t]=(0,l.useState)(!1),[r,i]=(0,l.useState)(0),[c,d]=(0,l.useState)("Your loved one"),[x,p]=(0,l.useState)([]),[m,b]=(0,l.useState)(!1),[u,f]=(0,l.useState)(1),g=(0,l.useRef)(null),h=(0,l.useRef)(0);(0,l.useEffect)(()=>{setTimeout(()=>window.scrollTo(0,0),100)},[]),(0,l.useEffect)(()=>{let e=localStorage.getItem("everloved-patient-name");e&&d(e);let s=()=>{let e="true"===localStorage.getItem("everloved-session-active");t(e),b("true"===localStorage.getItem("everloved-kill-switch"));try{let e=localStorage.getItem("everloved-conversation-log");if(e){let s=JSON.parse(e);p(s);let t=s.filter(e=>"system"===e.speaker);if(t.length>0){let e=t[t.length-1].text;e.includes("Kill switch")||e.includes("Tier 3")?f(3):e.includes("Tier 2")||e.includes("Memory anchor")?f(2):(e.includes("Tier 1")||e.includes("Ambient"))&&f(1)}}}catch(e){}if(e){let e=parseInt(localStorage.getItem("everloved-session-start")||"0");i(Math.floor((Date.now()-e)/1e3))}};s();let o=setInterval(s,1e3);return()=>clearInterval(o)},[]),(0,l.useEffect)(()=>{if(x.length>h.current){var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}h.current=x.length},[x]);let j=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),y=m?{color:"#C47A7A",label:"Crisis Mode",description:"Kill switch activated",pulse:!0,glowSize:40}:3===u?{color:"#E67E22",label:"High Stress",description:"Breath pacer active",pulse:!0,glowSize:35}:2===u?{color:"#F4D03F",label:"Mild Anxiety",description:"Memory anchor shown",pulse:!1,glowSize:25}:{color:"#7A9B6D",label:"Calm",description:"Baseline state",pulse:!1,glowSize:20},v={bg:"#FDF8F3",card:"#FFFFFF",accent:"#D4A84A",success:"#7A9B6D",danger:"#C47A7A",text:"#4A3D32",textMuted:"#8B7355",patientBubble:"#E8F4EA",companionBubble:"#F0E6D3",systemBubble:"#FFE5E5"};return(0,o.jsx)("div",{style:{padding:"32px",background:v.bg,minHeight:"100vh"},children:(0,o.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto"},className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsx)("h1",{style:{color:v.text,fontSize:"1.8rem",marginBottom:"8px"},className:"jsx-60e1e2f11bd62b60",children:"Monitoring Dashboard"}),(0,o.jsxs)("p",{style:{color:v.textMuted,marginBottom:"24px"},className:"jsx-60e1e2f11bd62b60",children:["Control and monitor ",c,"'s comfort sessions"]}),(0,o.jsxs)("div",{style:{background:v.card,borderRadius:"20px",padding:"24px",marginBottom:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",display:"flex",alignItems:"center",gap:"24px"},className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsx)("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:y.color,boxShadow:"0 0 ".concat(y.glowSize,"px ").concat(y.color),animation:y.pulse?"glowPulse 1.5s ease-in-out infinite":"none",flexShrink:0},className:"jsx-60e1e2f11bd62b60"}),(0,o.jsxs)("div",{className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsx)("h2",{style:{margin:0,color:v.text,fontSize:"1.4rem"},className:"jsx-60e1e2f11bd62b60",children:y.label}),(0,o.jsx)("p",{style:{margin:"4px 0 0",color:v.textMuted,fontSize:"0.95rem"},className:"jsx-60e1e2f11bd62b60",children:y.description})]}),s&&(0,o.jsxs)("div",{style:{marginLeft:"auto",textAlign:"right"},className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsx)("p",{style:{margin:0,color:v.textMuted,fontSize:"0.85rem"},className:"jsx-60e1e2f11bd62b60",children:"Session Duration"}),(0,o.jsx)("p",{style:{margin:"4px 0 0",color:v.text,fontSize:"1.5rem",fontWeight:600},className:"jsx-60e1e2f11bd62b60",children:"".concat(Math.floor(r/60),":").concat((r%60).toString().padStart(2,"0"))})]})]}),m&&(0,o.jsxs)("div",{style:{background:v.danger,color:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"24px",display:"flex",justifyContent:"space-between",alignItems:"center"},className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsxs)("div",{className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsx)("strong",{className:"jsx-60e1e2f11bd62b60",children:"⚠️ Kill Switch Activated"}),(0,o.jsx)("p",{style:{margin:"8px 0 0",opacity:.9},className:"jsx-60e1e2f11bd62b60",children:"The system detected escalating distress and switched to calm mode."})]}),(0,o.jsx)("button",{onClick:()=>{localStorage.removeItem("everloved-kill-switch"),b(!1),f(1)},style:{background:"#fff",color:v.danger,border:"none",padding:"10px 20px",borderRadius:"8px",fontWeight:600,cursor:"pointer"},className:"jsx-60e1e2f11bd62b60",children:"Reset"})]}),(0,o.jsxs)("div",{style:{background:v.card,borderRadius:"20px",padding:"32px",marginBottom:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsx)("h2",{style:{color:v.text,fontSize:"1.2rem",marginBottom:"24px"},className:"jsx-60e1e2f11bd62b60",children:"Session Control"}),(0,o.jsx)("div",{style:{display:"flex",gap:"20px",alignItems:"center",flexWrap:"wrap"},className:"jsx-60e1e2f11bd62b60",children:s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>{localStorage.setItem("everloved-session-active","false"),t(!1),i(0)},style:{background:v.danger,color:"#fff",border:"none",padding:"16px 32px",borderRadius:"12px",fontSize:"1.1rem",fontWeight:600,cursor:"pointer"},className:"jsx-60e1e2f11bd62b60",children:"⏹️ End Session"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsx)("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:v.success,animation:"pulse 2s infinite"},className:"jsx-60e1e2f11bd62b60"}),(0,o.jsx)("span",{style:{color:v.success,fontWeight:600},className:"jsx-60e1e2f11bd62b60",children:"Active"})]}),(0,o.jsx)("button",{onClick:()=>e.push("/patient"),style:{background:v.accent,color:"#fff",border:"none",padding:"12px 24px",borderRadius:"10px",fontSize:"1rem",fontWeight:500,cursor:"pointer"},className:"jsx-60e1e2f11bd62b60",children:"\uD83D\uDC41️ View Patient Screen"})]}):(0,o.jsx)("button",{onClick:()=>{localStorage.setItem("everloved-session-active","true"),localStorage.setItem("everloved-session-start",Date.now().toString()),localStorage.setItem("everloved-conversation-log","[]"),localStorage.removeItem("everloved-kill-switch"),p([]),b(!1),f(1),e.push("/patient")},style:{background:v.success,color:"#fff",border:"none",padding:"16px 32px",borderRadius:"12px",fontSize:"1.1rem",fontWeight:600,cursor:"pointer"},className:"jsx-60e1e2f11bd62b60",children:"▶️ Start Interaction"})})]}),(0,o.jsxs)("div",{style:{background:v.card,borderRadius:"20px",padding:"32px",marginBottom:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsx)("h2",{style:{color:v.text,fontSize:"1.2rem",marginBottom:"20px"},className:"jsx-60e1e2f11bd62b60",children:"Conversation Log"}),(0,o.jsxs)("div",{style:{maxHeight:"400px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"12px",padding:"8px"},className:"jsx-60e1e2f11bd62b60",children:[0===x.length?(0,o.jsx)("p",{style:{color:v.textMuted,textAlign:"center",padding:"40px"},className:"jsx-60e1e2f11bd62b60",children:s?"Waiting for conversation...":"Start a session to see conversation"}):x.map((e,s)=>(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"patient"===e.speaker?"flex-end":"flex-start"},className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsx)("div",{style:{background:"patient"===e.speaker?v.patientBubble:"system"===e.speaker?v.systemBubble:v.companionBubble,padding:"12px 16px",borderRadius:"16px",maxWidth:"80%"},className:"jsx-60e1e2f11bd62b60",children:(0,o.jsx)("p",{style:{margin:0,color:v.text,fontSize:"0.95rem"},className:"jsx-60e1e2f11bd62b60",children:e.text})}),(0,o.jsxs)("span",{style:{fontSize:"0.75rem",color:v.textMuted,marginTop:"4px",padding:"0 8px"},className:"jsx-60e1e2f11bd62b60",children:["patient"===e.speaker?c:"system"===e.speaker?"System":"Companion"," • ",j(e.timestamp)]})]},s)),(0,o.jsx)("div",{ref:g,className:"jsx-60e1e2f11bd62b60"})]})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px"},className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsxs)("div",{style:{background:v.card,borderRadius:"16px",padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsx)("p",{style:{color:v.textMuted,fontSize:"0.9rem",marginBottom:"8px"},className:"jsx-60e1e2f11bd62b60",children:"Messages"}),(0,o.jsx)("p",{style:{color:v.text,fontSize:"2rem",fontWeight:600},className:"jsx-60e1e2f11bd62b60",children:x.filter(e=>"system"!==e.speaker).length})]}),(0,o.jsxs)("div",{style:{background:v.card,borderRadius:"16px",padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsx)("p",{style:{color:v.textMuted,fontSize:"0.9rem",marginBottom:"8px"},className:"jsx-60e1e2f11bd62b60",children:"Current Tier"}),(0,o.jsx)("p",{style:{color:y.color,fontSize:"2rem",fontWeight:600},className:"jsx-60e1e2f11bd62b60",children:m?"KILL":"Tier ".concat(u)})]}),(0,o.jsxs)("div",{style:{background:v.card,borderRadius:"16px",padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},className:"jsx-60e1e2f11bd62b60",children:[(0,o.jsx)("p",{style:{color:v.textMuted,fontSize:"0.9rem",marginBottom:"8px"},className:"jsx-60e1e2f11bd62b60",children:"Status"}),(0,o.jsx)("p",{style:{color:m?v.danger:s?v.success:v.textMuted,fontSize:"1.5rem",fontWeight:600},className:"jsx-60e1e2f11bd62b60",children:m?"⚠️ Calm":s?"✅ Active":"⏸️ Idle"})]})]}),(0,o.jsx)(a(),{id:"60e1e2f11bd62b60",children:"@-webkit-keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}@-moz-keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}@-o-keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}@-webkit-keyframes glowPulse{0%,100%{-webkit-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 30px currentColor;box-shadow:0 0 30px currentColor}50%{-webkit-transform:scale(1.05);transform:scale(1.05);-webkit-box-shadow:0 0 50px currentColor;box-shadow:0 0 50px currentColor}}@-moz-keyframes glowPulse{0%,100%{-moz-transform:scale(1);transform:scale(1);-moz-box-shadow:0 0 30px currentColor;box-shadow:0 0 30px currentColor}50%{-moz-transform:scale(1.05);transform:scale(1.05);-moz-box-shadow:0 0 50px currentColor;box-shadow:0 0 50px currentColor}}@-o-keyframes glowPulse{0%,100%{-o-transform:scale(1);transform:scale(1);box-shadow:0 0 30px currentColor}50%{-o-transform:scale(1.05);transform:scale(1.05);box-shadow:0 0 50px currentColor}}@keyframes glowPulse{0%,100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 30px currentColor;-moz-box-shadow:0 0 30px currentColor;box-shadow:0 0 30px currentColor}50%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05);-webkit-box-shadow:0 0 50px currentColor;-moz-box-shadow:0 0 50px currentColor;box-shadow:0 0 50px currentColor}}"})]})})}}},function(e){e.O(0,[59,971,23,744],function(){return e(e.s=4423)}),_N_E=e.O()}]);